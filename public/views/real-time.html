<div ng-controller="TableCtrl">
  <px-card>
    <script>
      var app = {};
      var myChart;
      option = null;
      var base = +new Date(2014, 9, 3);
      var oneDay = 24 * 3600 * 1000;
      var date = [];
      var data = [Math.random() * 150];
      var now = new Date(base);
      function addData(shift) {
        now = [now.getFullYear(), now.getMonth() + 1, now.getDate()].join('-');
        date.push(now);
        data.push((Math.random() - 0.4) * 10 + data[data.length - 1]);
        if (shift) {
          date.shift();
          data.shift();
        }
        now = new Date(Date.parse(now) + 24 * 3600 * 1000);
      }

      for (var i = 1; i < 100; i++) {
        addData();
      }

      

      var $ = function(selector) { return typeof selector === "string" ? document.querySelector(selector) : selector || null }
      var $$ = function(selector) { return [].slice.call(document.querySelectorAll(selector)) }
      
     
      Polymer({
        is: "my-app-realtime",
        ready() {
          this.options = {
            xAxis: {
              type: 'category',
              boundaryGap: false,
              data: date
            },
            yAxis: {
              boundaryGap: [0, '50%'],
              type: 'value'
            },
            series: [
            {
              name:'成交',
              type:'line',
              smooth:true,
              symbol: 'none',
              stack: 'a',
              areaStyle: {
                normal: {}
              },
              data: data
            }]
          }
          app.timeTicket = setInterval(function () {
            addData(true);
              this.options = {
            xAxis: {
               data: date
             },
            series: [{
               name:'成交',
               data: data
            }]
          };
          }, 500);;
          if (this.options && typeof this.options === "object") {
            var startTime = +new Date();
            this.options=option;
            var endTime = +new Date();
            var updateTime = endTime - startTime;
            console.log("Time used:", updateTime);
          }
        }
       
       
      })
      console.log(chart._echarts_instance_)
      
    </script>

    <section>
      <my-app-realtime></my-app-realtime>
        <dom-module id="my-app-realtime">
          <template>
            <echarts-component width="900px" height="700px" options={{options}}></echarts-component>
          </template>
        </dom-module>
    </section>
  </px-card>
</div>
